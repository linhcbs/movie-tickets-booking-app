<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T1F1 Cinema - Hệ Thống Đặt Vé</title>
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
</head>

<body>

    <header>
        <div class="logo">
            <img src="./assets/favicon.ico" alt="" style="width: 40px; height: 40px; margin-right: 10px; border-radius: 5px;" >
            T1F1 CINEMA</div>
        <nav>
            <a href="/" onclick="">Trang Chủ</a>
            <div id="user-panel">
            </div>
        </nav>
    </header>

    <main>
        <div class="section-header">
            <h2 id="page-title">Phim Đang Chiếu</h2>
            <input type="text" id="search-box" placeholder="Tìm tên phim..." onkeyup="applyFilters()">
        </div>
        <div class="movies-content">
            <aside class="filter-sidebar">
                <div class="filter-header">
                    <h3>Bộ Lọc</h3>
                    <button class="reset-filters-btn" onclick="resetFilters()">Đặt lại</button>
                </div>

                <!-- Filter: Genre -->
                <div class="filter-group">
                    <label class="filter-title">Thể Loại</label>
                    <div id="genre-list" class="filter-options">
                    </div>
                </div>

                <!-- Filter: Duration -->
                <div class="filter-group">
                    <label class="filter-title">Thời Lượng (phút)</label>
                    <div class="range-input">
                        <input type="range" id="duration-min" min="0" max="300" value="0" onchange="applyFilters()">
                        <input type="range" id="duration-max" min="0" max="300" value="300" onchange="applyFilters()">
                    </div>
                    <div class="range-display">
                        <span id="duration-min-display">0</span> - <span id="duration-max-display">300</span>
                    </div>
                </div>

                <!-- Filter: Release Date -->
                <div class="filter-group">
                    <label class="filter-title">Ngày Chiếu</label>
                    <input type="date" id="filter-date" onchange="applyFilters()">
                </div>

                <!-- Filter: Ticket Price -->
                <div class="filter-group">
                    <label class="filter-title">Giá Vé Đơn (VND)</label>
                    <div class="range-input">
                        <input type="range" id="price-min" min="0" max="200000" value="0" step="10000" onchange="applyFilters()">
                        <input type="range" id="price-max" min="0" max="200000" value="200000" step="10000" onchange="applyFilters()">
                    </div>
                    <div class="range-display">
                        <span id="price-min-display">0</span> - <span id="price-max-display">200000</span>
                    </div>
                </div>

                <!-- Filter: Available Seats -->
                <div class="filter-group">
                    <label class="filter-title">Số Chỗ Trống</label>
                    <div class="range-input">
                        <input type="range" id="seats-min" min="0" max="80" value="0" onchange="applyFilters()">
                        <input type="range" id="seats-max" min="0" max="80" value="80" onchange="applyFilters()">
                    </div>
                    <div class="range-display">
                        <span id="seats-min-display">0</span> - <span id="seats-max-display">80</span>
                    </div>
                </div>
            </aside>

            <div id="movie-container" class="movie-grid"></div>
        </div>
    </main>

    <div id="booking-modal" class="modal hidden">
        <div class="modal-content booking-content">
            <span class="close-btn" onclick="closeModal('booking-modal')">&times;</span>
            <div class="booking-layout">
                <div class="movie-info-side">
                    <img id="modal-poster" src="" alt="Poster">
                    <h2 id="modal-title"></h2>
                    <p id="modal-category" class="tag"></p>
                    <p><strong>Thời lượng:</strong> <span id="modal-duration"></span> phút</p>
                    <p id="modal-desc"></p>

                    <div class="schedule-selector">
                        <label>Chọn suất chiếu:</label>
                        <select id="schedule-select" onchange="loadSeatMap()">
                        </select>
                    </div>
                </div>

                <div class="seat-selection-side">
                    <div class="screen">MÀN HÌNH</div>
                    <div id="seat-map-container">
                    </div>
                    <div class="legend">
                        <div>
                            <div class="seat available"></div> <small>Trống</small>
                        </div>
                        <div>
                            <div class="seat selected"></div> <small>Đang chọn</small>
                        </div>
                        <div>
                            <div class="seat occupied"></div> <small>Đã bán</small>
                        </div>
                    </div>
                    <div class="summary">
                        <p id="booking-loading"
                            style="text-align: center; color: #00e5ff; margin-top: 10px; display: none;">
                            ⏳ Đang xử lý...
                        </p>
                        <p>Ghế chọn: <span id="selected-seats-text">---</span></p>
                        <p>Tổng tiền: <span id="total-price">0</span> VND</p>
                        <button id="booking-btn" class="btn-checkout" onclick="handleBooking()">XÁC NHẬN ĐẶT VÉ</button>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="login-modal" class="modal hidden">
        <div class="modal-content auth-content">
            <span class="close-btn" onclick="closeModal('login-modal')">&times;</span>
            <h2>Đăng Nhập</h2>
            <form onsubmit="handleLogin(event)">
                <input type="email" id="login-email" placeholder="Email" required autocomplete="email">
                <input type="password" id="login-password" placeholder="Mật khẩu" required
                    autocomplete="current-password">
                <button type="submit" class="btn-checkout">Đăng Nhập</button>
            </form>
            <p class="auth-switch">
                Chưa có tài khoản? <a href="#" onclick="switchToRegister()">Đăng ký ngay</a>
            </p>
        </div>
    </div>

    <div id="register-modal" class="modal hidden">
        <div class="modal-content auth-content">
            <span class="close-btn" onclick="closeModal('register-modal')">&times;</span>
            <h2>Đăng Ký Tài Khoản</h2>
            <form onsubmit="handleRegister(event)">
                <input type="text" id="reg-fullname" placeholder="Họ và tên đầy đủ" required>
                <input type="text" id="reg-username" placeholder="Tên đăng nhập (viết liền)" required
                    autocomplete="username">
                <input type="email" id="reg-email" placeholder="Email" required autocomplete="email">
                <input type="password" id="reg-password" placeholder="Mật khẩu" required autocomplete="new-password">
                <input type="password" id="reg-confirm-pass" placeholder="Nhập lại mật khẩu" required
                    autocomplete="new-password">
                <button type="submit" class="btn-checkout">Đăng Ký</button>
            </form>
            <p class="auth-switch">
                Đã có tài khoản? <a href="#" onclick="switchToLogin()">Đăng nhập</a>
            </p>
        </div>
    </div>

    <div id="success-modal" class="modal hidden">
        <div class="modal-content success-content">
            <div class="success-icon">✓</div>
            <h2>Đặt Vé Thành Công!</h2>
            <p id="success-message">Bạn đã đặt vé thành công.</p>
            <div class="success-details">
                <p><strong>Mã đơn hàng:</strong> <span id="order-id"></span></p>
                <p><strong>Phim:</strong> <span id="order-movie"></span></p>
                <p><strong>Ngày chiếu:</strong> <span id="order-showtime"></span></p>
                <p><strong>Phòng:</strong> <span id="order-room"></span></p>
                <p><strong>Khách hàng:</strong> <span id="order-user"></span></p>
                <p><strong>Ghế:</strong> <span id="order-seats"></span></p>
                <p><strong>Tổng tiền:</strong> <span id="order-total"></span> VND</p>
            </div>
            <button class="btn-checkout" onclick="closeSuccessModal()">Quay lại trang chủ</button>
        </div>
    </div>

    <div id="my-tickets-modal" class="modal hidden">
        <div class="modal-content tickets-content">
            <span class="close-btn" onclick="closeModal('my-tickets-modal')">&times;</span>
            <h2>Danh Sách Vé Của Tôi</h2>
            <div id="tickets-list" class="tickets-list">
                <p style="text-align: center; padding: 20px;">Đang tải...</p>
            </div>
        </div>
    </div>

    <div id="profile-modal" class="modal hidden">
        <div class="modal-content profile-content">
            <span class="close-btn" onclick="closeModal('profile-modal')">&times;</span>
            <div class="profile-container">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <img id="profile-avatar-img" src="https://ui-avatars.com/api/?name=User&background=e50914&color=fff" alt="Avatar">
                    </div>
                    <div class="profile-header-info">
                        <h2 id="profile-fullname"></h2>
                        <p id="profile-username" class="username-text"></p>
                        <p id="profile-email" class="email-text"></p>
                    </div>
                </div>

                <div class="profile-tabs">
                    <button class="tab-btn active" onclick="switchProfileTab('info')">Thông Tin</button>
                    <button class="tab-btn" onclick="switchProfileTab('stats')">Thống Kê</button>
                </div>

                <div id="profile-tab-info" class="profile-tab active">
                    <div class="profile-info-item">
                        <label>Họ và Tên:</label>
                        <p id="profile-display-fullname"></p>
                    </div>
                    <div class="profile-info-item">
                        <label>Tên Đăng Nhập:</label>
                        <p id="profile-display-username"></p>
                    </div>
                    <div class="profile-info-item">
                        <label>Email:</label>
                        <p id="profile-display-email"></p>
                    </div>
                    <div class="profile-info-item">
                        <label>Mã Người Dùng:</label>
                        <p id="profile-display-userid"></p>
                    </div>
                    <button class="btn-checkout" style="margin-top: 20px;" onclick="openChangePasswordModal()">Đổi Mật Khẩu</button>
                </div>

                <div id="profile-tab-stats" class="profile-tab">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="profile-stat-total-tickets">0</div>
                            <div class="stat-label">Tổng Vé Đã Đặt</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="profile-stat-active-tickets">0</div>
                            <div class="stat-label">Vé Đang Hoạt Động</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="profile-stat-cancelled-tickets">0</div>
                            <div class="stat-label">Vé Đã Hủy</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="profile-stat-total-spent">0 VND</div>
                            <div class="stat-label">Tổng Chi Tiêu</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="change-password-modal" class="modal hidden">
        <div class="modal-content auth-content">
            <span class="close-btn" onclick="closeModal('change-password-modal')">&times;</span>
            <h2>Đổi Mật Khẩu</h2>
            <form onsubmit="handleChangePassword(event)">
                <input type="password" id="current-password" placeholder="Mật khẩu hiện tại" required>
                <input type="password" id="new-password" placeholder="Mật khẩu mới" required>
                <input type="password" id="confirm-new-password" placeholder="Nhập lại mật khẩu mới" required>
                <button type="submit" class="btn-checkout">Đổi Mật Khẩu</button>
            </form>
        </div>
    </div>

    <script src="script.js"></script>

    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-left">
                <img src="/assets/favicon.ico" alt="T1F1 Logo" class="footer-logo">
                <div class="footer-info">
                    <div class="cinema-name">T1F1 CINEMA</div>
                    <div class="address">36 đường Thanh Hóa, quận 18, thành phố Mộng Mơ, quốc gia Vô Địch</div>
                    <div class="contact"><strong>Số điện thoại:</strong> 0244466666</div>
                    <div class="email"><strong>Email:</strong> <br>
                    <p style="padding: 0px; margin: 0px;">
                        t1f1cinemaforwork@gmail.com <br>
                        nguymylinh.work@gmail.com (LinhCBs)<br>
                        nnmtam1703@gmail.com (Shinzou)
                    </p>
                    </div>
                    <div class="hours"><strong>Giờ mở cửa:</strong> 09:00–23:00 T2–CN</div>
                </div>
            </div>

            <div class="footer-middle">
                <div class="designer"><strong>Developers:</strong> LinhCBs, Shinzou</div>
                <div class="github-links"><strong>LinhCBs' Github:</strong> <a href="https://github.com/linhcbs" target="_blank" rel="noopener">https://github.com/linhcbs</a></div>
                <div class="github-links"><strong>Shinzou's Github:</strong> <a href="https://github.com/Shinzou1703" target="_blank" rel="noopener">https://github.com/Shinzou1703</a></div>
                <div class="copyright">© 2026 T1F1 Cinema. All rights reserved.</div>
            </div>

            <div class="footer-right">
                <div class="social"><strong>Facebook:</strong>
                    <a href="https://www.facebook.com/t1f1cinema" target="_blank" rel="noopener">https://www.facebook.com/t1f1cinema</a>
                </div>
                <div class="note">Giá vé có thể thay đổi theo ngày lễ hoặc cuối tuần</div>
            </div>
        </div>
    </footer>

</body>

</html>